<!-- Dashboard Header -->
<div class="glass-card full-width">
    <div class="dashboard-header" style="display: flex; justify-content: space-between; align-items: center;">
        <div>
            <h2
                style="font-size: 2rem; margin-bottom: 5px; background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                Smart ATS Analysis</h2>
            <p id="candidate-info" class="subtitle" style="margin: 0;">Analyzing candidate profile...</p>
        </div>
        <div style="display: flex; gap: 15px;">
            <button id="export-report-btn" class="btn-outline" style="display: flex; align-items: center; gap: 8px;">
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path
                        d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z" />
                    <path
                        d="M4.603 14.087a.81.81 0 0 1-.438-.42c-.195-.388-.13-.776.08-1.102.198-.307.526-.568.897-.787a7.68 7.68 0 0 1 1.482-.645 19.697 19.697 0 0 0 1.062-2.227 7.269 7.269 0 0 1-.43-1.295c-.086-.4-.119-.796-.046-1.136.075-.354.274-.672.65-.823.192-.077.4-.12.602-.077a.7.7 0 0 1 .471.256 1.516 1.516 0 0 1 .288.756 1.705 1.705 0 0 1-.027.432c-.053.304-.152.548-.28.775a6.52 6.52 0 0 1-.722.955 8.956 8.956 0 0 0-.293 1.146 17.518 17.518 0 0 0 2.443.714c.489.062 1.033.402 1.344.978.334.619.231 1.334-.23 1.722-.44.38-1.077.493-1.638.257-.506-.214-1.127-.58-1.66-1.02a2.043 2.043 0 0 1-.587-.694c-.4.204-.842.365-1.32.442-.429.069-.884.11-1.341.11-.645 0-1.295-.06-1.922-.21zM8.59 7.42c.07-.15.11-.3.12-.45a.517.517 0 0 0-.063-.332.296.296 0 0 0-.23-.105.234.234 0 0 0-.153.05c-.05.044-.092.14-.11.26-.016.11-.02.26.012.434.02.109.053.228.096.357a6.236 6.236 0 0 0 .328-.214zM4.653 12.87c.07.148.196.216.332.216.12 0 .24-.055.35-.145.14-.114.24-.264.28-.432a5.405 5.405 0 0 1-.737-.301c-.131-.07-.221-.15-.246-.24-.031-.109.018-.217.106-.328.043-.053.111-.09.206-.115a3.684 3.684 0 0 1-.95.707c-.012.062-.016.155.03.352.022.094.053.197.098.312zM11.41 12.33c.1-.19.16-.39.18-.58.02-.19-.01-.39-.12-.57-.08-.13-.21-.24-.41-.3-.2.06-.41.15-.65.28a9.423 9.423 0 0 1 1.09.91zM7.28 10.37a20.08 20.08 0 0 1 1.48-2.61c-.24.1-.47.21-.71.32a13.34 13.34 0 0 0-.97 2.12c.06-.01.13-.02.2-.03z" />
                </svg>
                Download PDF
            </button>
            <button id="back-btn" class="btn-text" style="font-weight: 600;">← New Scan</button>
        </div>
    </div>
</div>

<div class="dashboard-grid">
    <!-- Left Column: Score & Keywords -->
    <div class="dashboard-col">
        <!-- ATS Score -->
        <div class="glass-card">
            <h3>Overall ATS Match</h3>
            <div class="ats-container" style="justify-content: center; flex-direction: column; text-align: center;">
                <div class="circle-chart-container" style="max-width: 200px; margin: 0 auto;">
                    <svg viewBox="0 0 36 36" class="circular-chart">
                        <path class="circle-bg" stroke-width="3" style="stroke: rgba(255,255,255,0.05);"
                            d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                        <path class="circle" id="ats-circle" stroke-dasharray="0, 100" stroke-width="3"
                            d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                        <text x="18" y="20.8" class="percentage" id="ats-text"
                            style="fill: var(--text-primary); font-size: 0.6em;">0%</text>
                    </svg>
                </div>
                <div
                    style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 100%; margin-top: 20px; text-align: left;">
                    <div class="score-breakdown">
                        <span style="font-size: 0.85rem; color: var(--text-secondary);">Keywords (40%)</span>
                        <div class="progress-bar-bg">
                            <div class="progress-bar-fill" id="kw-bar" style="width: 0%; background: #6366f1;"></div>
                        </div>
                    </div>
                    <div class="score-breakdown">
                        <span style="font-size: 0.85rem; color: var(--text-secondary);">Format & Info (15%)</span>
                        <div class="progress-bar-bg">
                            <div class="progress-bar-fill" id="fmt-bar" style="width: 0%; background: #10b981;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section Detection -->
        <div class="glass-card">
            <h3>Resume Sections Detected</h3>
            <div id="sections-list" style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 15px;">
                <!-- Filled via JS -->
            </div>
        </div>

        <!-- Keyword Analysis -->
        <div class="glass-card">
            <h3>Keyword Analysis</h3>

            <h5 style="color: #34d399; margin-top: 15px; margin-bottom: 8px;">Matched Keywords</h5>
            <div id="matched-kws" class="tags-wrapper" style="margin-bottom: 20px;"></div>

            <h5 style="color: #f87171; margin-bottom: 8px;">Missing Keywords</h5>
            <div id="missing-kws" class="tags-wrapper"></div>

            <h5 style="color: #a78bfa; margin-top: 20px; margin-bottom: 8px;">Extra Keywords (Not in JD)</h5>
            <div id="extra-kws" class="tags-wrapper"></div>
        </div>
    </div>

    <!-- Right Column: AI Analysis -->
    <div class="dashboard-col">

        <!-- AI Suggestions -->
        <div class="glass-card">
            <h3>AI Resume Suggestions</h3>
            <div class="ats-tips">
                <ul id="ats-tips-list" style="list-style-type: none; padding: 0;"></ul>
            </div>
        </div>

        <!-- Sentence Improver -->
        <div class="glass-card" style="border-color: rgba(217, 70, 239, 0.4);">
            <h3 style="display: flex; align-items: center; gap: 8px;">
                <span style="font-size: 1.2rem;">✨</span> Sentence Improver
            </h3>
            <p style="font-size: 0.9rem; margin-bottom: 15px;">Paste a bullet point from your experience to have AI
                rewrite it professionally with action verbs.</p>
            <textarea id="sentence-input" class="input-field" rows="3"
                placeholder="e.g., 'Made the website faster.'..."></textarea>
            <button id="improve-btn" class="btn-primary"
                style="margin-top: 10px; width: 100%; font-size: 0.95rem; padding: 10px;">Rewrite with AI</button>

            <div id="improved-result" class="hidden"
                style="margin-top: 15px; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 8px; border-left: 3px solid #d946ef;">
                <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 5px;">Improved Version:</p>
                <p id="improved-text" style="font-weight: 500; margin: 0; color: #fdf4ff;"></p>
            </div>
        </div>

    </div>
</div>